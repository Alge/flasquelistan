{% extends "layout.html" %}

{% from "quotes.html" import quote_inner %}

{% macro usercard(user) %}
<div class="card usercard">
  <div class="username" data-firstname="{{ user.first_name }}"
                        data-lastname="{{ user.last_name }}"
                        data-nickname="{{ user.nickname }}">
    <a href="{{ url_for('strequelistan.show_profile', user_id=user.id) }}">
      {% if user.nickname %}
      {{ user.nickname }}
      {% else %}
      {{ user.first_name }} {{ user.last_name }}
      {% endif %}
    </a>
  </div>
  <div class="streque-buttons">
    {% for i in range(1, 5) %}
    <form class="streque-form"
          method="POST"
          action="{{ url_for('strequelistan.add_streque', user_id=user.id, amount=i) }}"
          data-userid="{{ user.id }}" data-amount="{{ i }}">

      <button class="streque-button" type="submit">
        {{ 'I'*i }}
      </button>

    </form>
    {% endfor %}
  </div>
</div>
{% endmacro %}

{% block body %}
<div class="cards">
  <blockquote class="quote quote-display">
    {{ quote_inner(quote) }}
  </blockquote>

  {{ usercard(current_user) }}
  <h2>Filtrera anv√§ndare</h2>
  <div class="user-filter">
    <input type="text" id="user-filter" placeholder="Namn" autocomplete="off">
    <button id="clear-filter" type="button">Rensa</button>
  </div>

  {% for group in groups %}
  <div class="group">
    <h2>{{ group.name }}</h2>
    {% for user in group.users %}
    {{ usercard(user) }}
    {% endfor %}
  </div>
  {% endfor %}
</div>
{% endblock %}

{% block scripts %}
{% assets "js_common", "js_streque" %}
<script src="{{ ASSET_URL }}"></script>
{% endassets %}
{% endblock %}
